<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Crosshatch</title>
    <style>
      body { margin: 0; font-family: system-ui, sans-serif; }
      #topbar {
        display: flex; flex-wrap: wrap; gap: 10px; align-items: center;
        padding: 10px; border-bottom: 1px solid #ddd;
      }
      #wrap { 
        display: grid; 
        grid-template-columns: 1fr; 
        height: calc(100vh - 62px); 
      }
      #wrap.compare-mode {
        grid-template-columns: 1fr 1fr;
        gap: 2px;
        background: #ddd;
      }
      .canvas-container {
        position: relative;
        overflow: hidden;
        background: #fff;
      }
      .canvas-container canvas {
        width: 100%;
        height: 100%;
        display: block;
        background: #fff;
      }
      .canvas-label {
        position: absolute;
        top: 8px;
        left: 8px;
        background: rgba(0,0,0,0.6);
        color: #fff;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 11px;
        font-weight: 500;
        pointer-events: none;
        opacity: 0;
        transition: opacity 0.2s;
      }
      #wrap.compare-mode .canvas-label {
        opacity: 1;
      }
      #originalContainer {
        display: none;
      }
      #wrap.compare-mode #originalContainer {
        display: block;
      }
      label { display: inline-flex; gap: 6px; align-items: center; font-size: 12px; }
      input[type="range"] { width: 120px; }
      .spacer { width: 10px; }
      #btnCompare {
        font-size: 12px;
      }
      #btnCompare.active {
        background: #007bff;
        color: white;
        border-color: #0056b3;
      }
    </style>
  </head>
  <body>
    <div id="topbar">
      <button id="btnOpen">Open image…</button>
      <button id="btnExport" disabled>Export PNG…</button>

      <span class="spacer"></span>

      <button id="btnFit" disabled>Fit</button>
      <button id="btnOneToOne" disabled>100%</button>

      <span class="spacer"></span>

      <button id="btnCompare" disabled>Compare</button>

      <span class="spacer"></span>

      <!-- Crosshatch parameters -->
      <label>Brightness <input id="brightness" type="range" min="0.5" max="2.0" step="0.05" value="1.0"></label>
      <label>Scale <input id="flow" type="range" min="1" max="20" step="0.1" value="2.0"></label>
      <label>Hatching <input id="hatching" type="range" min="0" max="1" step="0.05" value="1.0"></label>
      <label>Edges <input id="edges" type="range" min="0" max="2" step="0.1" value="1.0"></label>
      <label>Toon <input id="edge" type="range" min="0.1" max="0.9" step="0.01" value="0.5"></label>
      <label>Threshold <input id="contrast" type="range" min="0.1" max="0.8" step="0.01" value="0.3"></label>

      <span style="font-size:12px; opacity:0.75;">
        Tip: drag to pan, wheel to zoom
      </span>
    </div>

    <div id="wrap">
      <div id="originalContainer" class="canvas-container">
        <canvas id="glOriginal"></canvas>
        <span class="canvas-label">ORIGINAL</span>
      </div>
      <div id="processedContainer" class="canvas-container">
        <canvas id="gl"></canvas>
        <span class="canvas-label">PROCESSED</span>
      </div>
    </div>

    <script type="module" src="./renderer.js"></script>
  </body>
</html>
